var v=Object.defineProperty;var x=(i,n,a)=>n in i?v(i,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[n]=a;var l=(i,n,a)=>(x(i,typeof n!="symbol"?n+"":n,a),a);import{m as b,v as f,G as L,D as m,C as u,n as M,w as S,o as p,x as _,M as d,y as A,T as w,e as C,z,E as P,H as D,J as F,K as T,L as B}from"./WebglThreeRender-EWXfKFhR.js";import{d as G,r as k,o as E,a as R,c as I,f as U,b as J}from"./index--7M1sW-4.js";const N=""+new URL("bg-FJa0tkSQ.png",import.meta.url).href,V=""+new URL("cycle--VNC2rUI.png",import.meta.url).href,q={id:"lunar",class:"webgl"},H=U("div",{id:"lunar-webgl",class:"webgl-3d"},null,-1),K=[H],j=G({__name:"index",setup(i){class n extends b{constructor(o){super(o);l(this,"meshes",[]);l(this,"cycle");l(this,"group",new f);l(this,"plane");this.myDraw()}loadModel(){new L().load("./models/dragon.gltf",t=>{const e=t.scene;e.traverse(s=>{s.isMesh&&(s.castShadow=!0,s.material.metalness=0,s.material.roughness=.8,s.material.transparent=!0,s.material.side=m,s.material.color=new u(16777215))});const c=new M(e);c.clipAction(t.animations[3]).setDuration(1.2).play(),this.mixers.push(c),e.rotation.set(0,-59.5,0),e.scale.set(3.8,3.8,3.8),e.position.set(0,-2,0),this.group.add(e)},t=>{},t=>{}),new S().load("./models/text.fbx",t=>{t.traverse(e=>{e.isMesh&&(this.meshes.push(t),e.castShadow=!0,e.receiveShadow=!0,e.material.metalness=.2,e.material.roughness=.8,e.material.color=new u(1118481))}),t.position.set(4,24,-20),t.rotation.set(-80,0,0),t.scale.set(.45,.45,.45),this.group.add(t),this.group.scale.set(.1,.1,.1),this.scene.add(this.group)})}initPlane(){var o=new p(300,300),r=new _({opacity:.5}),t=new d(o,r);t.rotation.x=-.5*Math.PI,t.position.set(0,-.179,0),t.receiveShadow=!0,this.plane=t,this.scene.add(t),this.cycle=new d(new p(40,40),new A({map:new w().load(V),transparent:!0,side:m})),this.cycle.rotation.x=-.5*Math.PI,this.cycle.position.set(0,-.18,0),this.cycle.scale.set(.12,.12,.12),this.cycle.receiveShadow=!0,this.scene.add(this.cycle)}resetCamera(){this.camera.position.set(-.03605639885864392,1.9312043546788207,5.392508662632908)}resetLight(){const o=new C(.001,.001,.001),r=new z({color:14423578}),t=new d(o,r);t.position.set(0,0,0);const e=new P(16777215,1);e.intensity=1,e.position.set(6,5,4),e.castShadow=!0,e.target=t,e.shadow.mapSize.width=512*14,e.shadow.mapSize.height=512*14,e.shadow.camera.top=20,e.shadow.camera.bottom=-20,e.shadow.camera.left=-20,e.shadow.camera.right=20,this.scene.add(e);const c=new D(16777215);this.scene.add(c);const s=new F(16777215);s.position.set(20,20,8),s.castShadow=!1,s.target=this.plane,this.scene.add(s)}resetAnimate(){this.cycle.rotation.z+=.3/60,requestAnimationFrame(this.resetAnimate.bind(this));const o=this.clock.getDelta();this.mixers&&this.mixers.forEach(r=>{r.update(o*.4)})}initRender2(){this.webglCanvas.addEventListener("dblclick",(()=>{var o={x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},r={x:this.controls.target.x,y:this.controls.target.y,z:this.controls.target.z},t={x:-.03605639885864392,y:1.9312043546788207,z:5.392508662632908},e={x:0,y:0,z:0};this.animateCamera(o,r,t,e,()=>{})}).bind(this))}resetControls(){this.controls.maxPolarAngle=1.5,this.controls.minDistance=4,this.controls.maxDistance=25}myDraw(){this.scene.background=new w().load(N),this.scene.fog=new T(14540253,100,120),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=B,this.initPlane(),this.loadModel(),this.resetCamera(),this.resetLight(),this.resetControls(),this.resetAnimate(),this.initRender2()}destroyed2(){cancelAnimationFrame(this.resetAnimate),this.meshes=[],this.plane=null,this.controls=null,this.renderer.dispose()}}const a=k(null);function g(){const h=document.getElementById("lunar-webgl");a.value=new n(h),a.value.removeLight()}return E(()=>{g()}),R(()=>{a.value&&(a.value.destroyed2(),a.value.destroyed(a.value),cancelAnimationFrame(a.value.animate),a.value.scene.clear(),a.value),a.value=null}),(h,y)=>(J(),I("div",q,K))}});export{j as default};
